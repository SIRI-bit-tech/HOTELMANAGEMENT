<!DOCTYPE html>
{% load static %}
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- SEO Meta Tags -->
    <title>{% block title %}HotelPMS - Professional Hotel Property Management System{% endblock %}</title>
    <meta name="description" content="{% block description %}Comprehensive hotel property management system for modern hotels. Manage reservations, guests, rooms, housekeeping, and billing efficiently.{% endblock %}">
    <meta name="keywords" content="{% block keywords %}hotel management, property management system, hotel software, reservation system, hotel PMS{% endblock %}">
    <meta name="author" content="HotelPMS">
    <meta name="robots" content="{% block robots %}index, follow{% endblock %}">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="{% block og_title %}HotelPMS - Professional Hotel Management{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Streamline your hotel operations with our comprehensive property management system{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{% block og_url %}{{ request.build_absolute_uri }}{% endblock %}">
    <meta property="og:image" content="{% block og_image %}{{ request.scheme }}://{{ request.get_host }}/static/images/og-image.jpg{% endblock %}">
    <meta property="og:site_name" content="HotelPMS">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{% block twitter_title %}HotelPMS - Hotel Management System{% endblock %}">
    <meta name="twitter:description" content="{% block twitter_description %}Professional hotel property management system{% endblock %}">
    <meta name="twitter:image" content="{% block twitter_image %}{{ request.scheme }}://{{ request.get_host }}/static/images/twitter-card.jpg{% endblock %}">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="{% block canonical %}{{ request.build_absolute_uri }}{% endblock %}">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/static/images/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/images/favicon-16x16.png">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#ecfdf5',
                            100: '#d1fae5',
                            200: '#a7f3d0',
                            300: '#6ee7b7',
                            400: '#34d399',
                            500: '#10b981',
                            600: '#059669',
                            700: '#047857',
                            800: '#065f46',
                            900: '#064e3b',
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.5s ease-out',
                        'bounce-slow': 'bounce 2s infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                }
            },
            darkMode: 'class',
        }
    </script>
    
    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.2"></script>
    
    <!-- Alpine.js -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- AOS (Animate On Scroll) for parallax effects -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- Custom CSS -->
    <style>
        [x-cloak] { display: none !important; }
        .htmx-indicator { opacity: 0; transition: opacity 200ms ease-in; }
        .htmx-request .htmx-indicator { opacity: 1; }
        .htmx-request.htmx-indicator { opacity: 1; }
        
        /* Parallax scrolling effects */
        .parallax {
            background-attachment: fixed;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
        }
        
        .parallax-slow {
            transform: translateY(var(--scroll-y, 0) * 0.5);
        }
        
        .parallax-fast {
            transform: translateY(var(--scroll-y, 0) * -0.3);
        }
        
        /* Smooth transitions */
        .transition-all-300 {
            transition: all 0.3s ease-in-out;
        }
        
        /* Glass morphism effect */
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #10b981;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #059669;
        }
    </style>
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "HotelPMS",
        "description": "Professional Hotel Property Management System",
        "applicationCategory": "BusinessApplication",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>
    
    {% block extra_head %}{% endblock %}
</head>
<body class="bg-gray-50 min-h-screen flex flex-col dark:bg-gray-900" 
      x-data="{ 
          darkMode: localStorage.getItem('darkMode') === 'true' || false, 
          sidebarOpen: true,
          init() {
              this.$watch('darkMode', val => localStorage.setItem('darkMode', val));
              if (this.darkMode) document.documentElement.classList.add('dark');
          }
      }" 
      :class="{ 'dark': darkMode }">

    {% if not request.user.is_authenticated %}
        {% include 'partials/public_header.html' %}
    {% else %}
        {% include 'partials/authenticated_header.html' %}
    {% endif %}

    <main class="flex-1">
        {% block content %}{% endblock %}
    </main>

    {% if not request.user.is_authenticated %}
        {% include 'partials/footer.html' %}
    {% endif %}

    <!-- Toast Notifications -->
    <div id="toast-container" class="fixed top-4 right-4 z-50 space-y-2"></div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center">
        <div class="bg-white rounded-lg p-6 flex items-center space-x-3">
            <svg class="animate-spin h-6 w-6 text-primary-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <span class="text-gray-700">Loading...</span>
        </div>
    </div>

    <!-- Core JavaScript -->
    <script src="{% static 'js/main.js' %}"></script>

    <!-- Page-specific JavaScript -->
    {% if request.user.is_authenticated %}
        {% if request.resolver_match.url_name == 'dashboard' %}
            <script src="{% static 'js/dashboard.js' %}"></script>
        {% elif 'room' in request.resolver_match.url_name %}
            <script src="{% static 'js/rooms.js' %}"></script>
        {% elif 'reservation' in request.resolver_match.url_name or 'calendar' in request.resolver_match.url_name %}
            <script src="{% static 'js/calendar.js' %}"></script>
        {% endif %}
    {% endif %}

    <!-- Form handling JavaScript (used on most pages) -->
    <script src="{% static 'js/forms.js' %}"></script>

    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            once: true,
            offset: 100
        });

        // Parallax scrolling effect
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            document.documentElement.style.setProperty('--scroll-y', scrolled + 'px');
        });

        // HTMX event listeners
        document.addEventListener('htmx:beforeRequest', () => {
            document.getElementById('loading-overlay').classList.remove('hidden');
            document.getElementById('loading-overlay').classList.add('flex');
        });

        document.addEventListener('htmx:afterRequest', () => {
            document.getElementById('loading-overlay').classList.add('hidden');
            document.getElementById('loading-overlay').classList.remove('flex');
        });
    </script>

    {% block extra_scripts %}{% endblock %}
</body>
</html>
